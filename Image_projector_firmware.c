#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>

void eraseImageData() {
    system("clear"); 
}
void saveImageData(uint8_t *imageDataChunk, uint16_t imageDataChunkLength) {
    
    for (int i = 0; i < imageDataChunkLength; i++) {
        printf("%C", imageDataChunk[i]);
    } 
}

void imageReceiver(uint8_t *receivedBytes) {
if (receivedBytes[0] != 0x7D) {
        printf("Invalid packet header\n");
        return;
    }
    // Check packet length (example logic, adjust as needed)
    uint8_t length = receivedBytes[1];
    if (length > 0xFF) {
        printf("Invalid packet length\n");
        return;
    }

    // Save image data (assuming image data starts at index 6)
    saveImageData(&receivedBytes[6], length);

}


int main()
{
    
    printf("Toy Projector Firmware v1.0 is running");
    
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x01, 0x03, 0xB3, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x28, 0x00, 0x02, 0x03, 0xB3, 0x0A, 0x20, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x2E, 0x2D, 0x2D, 0x2D, 0x22, 0x22, 0x22, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x22, 0x22, 0x22, 0x2D, 0x2D, 0x2D, 0x2E, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x28, 0x00, 0x03, 0x03, 0xB3, 0x0A, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2E, 0x2D, 0x27, 0x3A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x20, 0x20, 0x2E, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2E, 0x20, 0x20, 0x3A, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x28, 0x00, 0x04, 0xB3, 0xB3, 0x0A, 0x7C, 0x20, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x20, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x3A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x20, 0x7C, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x28, 0x00, 0x05, 0x03, 0xB3, 0x0A, 0x7C, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x42, 0x3A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x4C, 0x69, 0x74, 0x74, 0x6C, 0x65, 0x20, 0x45, 0x72, 0x72, 0x6F, 0x72, 0x3A, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0xD7});   
    imageReceiver((uint8_t[]){0x7D, 0x28, 0x00, 0x06, 0x03, 0xB3, 0x0A, 0x7C, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x42, 0x3A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x07, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x42, 0x3A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x50, 0x6F, 0x77, 0x65, 0x72, 0x20, 0x6E, 0x6F, 0x74, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x08, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x66, 0x6F, 0x75, 0x6E, 0x64, 0x2E, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x09, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x3A, 0x20, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x7C, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x0A, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x3D, 0x3D, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x7C, 0x20, 0x3A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x20, 0x7C, 0x20, 0x20, 0xD7}); 
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x0B, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x4F, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x20, 0x20, 0x27, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x2D, 0x27, 0x20, 0x20, 0x3A, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x0C, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x6F, 0x20, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x27, 0x2D, 0x2D, 0x2D, 0x2E, 0x2E, 0x2E, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2E, 0x2E, 0x2E, 0x2D, 0x2D, 0x2D, 0x27, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x32, 0x00, 0x0D, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x6F, 0x20, 0x7C, 0x2D, 0x2E, 0x5F, 0x2E, 0x2D, 0x69, 0x5F, 0x5F, 0x5F, 0x2F, 0x27, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x5C, 0x2E, 0x5F, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x36, 0x00, 0x0E, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x27, 0x2D, 0x2E, 0x5F, 0x5F, 0x5F, 0x5F, 0x6F, 0x5F, 0x7C, 0x20, 0x20, 0x20, 0x27, 0x2D, 0x2E, 0x20, 0x20, 0x20, 0x27, 0x2D, 0x2E, 0x2E, 0x2E, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x2E, 0x2E, 0x2E, 0x2D, 0x27, 0x20, 0x20, 0x60, 0x2E, 0x5F, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x40, 0x00, 0x0F, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x7C, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x7C, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x60, 0x2E, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x20, 0x20, 0x20, 0x60, 0x2E, 0x5F, 0x5F, 0x5F, 0x2E, 0x2D, 0x2E, 0x20, 0x20, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x40, 0x00, 0x10, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x2E, 0x27, 0x2E, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x2E, 0x27, 0x2E, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x5F, 0x5F, 0x5F, 0x3A, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x36, 0x00, 0x11, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x66, 0x73, 0x63, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x2E, 0x27, 0x2E, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x2E, 0x27, 0x2E, 0x20, 0xD7});
    imageReceiver((uint8_t[]){0x7D, 0x36, 0x00, 0x12, 0x03, 0xB3, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x0A, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x3A, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x5F, 0x3A, 0x20, 0xD7});
 
    return 0;
}


